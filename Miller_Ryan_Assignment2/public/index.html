<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="Part A.css">
    <title>Assignment 1</title>

    <script src="./Product_info.js">
    </script>
    <script>
        let params = (new URL(document.location)).searchParams;
        if (params.has("ErrorMessagesX")) {
                ErrorMessagesX = params.get("ErrorMessagesX")
                cosole.log(ErrorMessagesX, "From Index")
            }
/*
            //Take errors from query string and set them to custom variables
        for (i = 0; i < products_array.length; i++) {
            if (params.has("IndexErrors" + [i])) {
                IndexError[i] = params.get("IndexErrors" + [i])
            }
        }
        //Set inner HTML of error boxes to errors assigned to custom variables
        for (i = 0; i < products_array.length; i++) {
            document.getElementById("IndexErrorBox" + [i]).innerHTML = IndexError[i];
        }
*/
    </script>
</head>

<body class="content">

    <main>

        <form name="product_display" method="POST" action="./purchase">
            <table>
                <tr><img id=headerpic src=./Images/header.jpg> </tr> <tr>
                    <td colspan=2 class="headings">Package:</td>
                    <td class="headings">Quantity:</td>
                    <td class="headings">Errors:</td>
                </tr>


                <script>
                    //Loop to display products, description and quantity text box, prints out each product.
                    for (i = 0; i < products_array.length; i++) {
                        document.write(` <tr>
                        <div id=productbox>
                            <td><img src=./Images/${(products_array[i].image)} width=200px height=200px></td>
                            <td id=description>
                                <h2>${(products_array[i].package)} - $${(products_array[i].price)}</h2>
                                <p>${(products_array[i].description)}</p>
                            </td>
                            <td align = "center">Enter a Quantity:<br> <input type="text" name="${(products_array[i].package)}"
                                    onkeyup="checkQuantityTextbox(this);"><br><span id='qty_textbox_message'
                                    +"${[i]}">Dont Leave Blank<span></td>
                            <td id="ErrorBox" align = "center">${(ErrorMessagesX[i])}</td>
                        </div>
                </tr>
                `);
                    };
                </script>
                
            </table>
            <div id="submit">
                <input type="submit" name="submit" value="Submit Order">
            </div>

        </form>

    </main>

</body>

</html>